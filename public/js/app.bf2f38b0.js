(function(e){function t(t){for(var r,n,i=t[0],l=t[1],c=t[2],u=0,f=[];u<i.length;u++)n=i[u],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&f.push(s[n][0]),s[n]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(f.length)f.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,i=1;i<a.length;i++){var l=a[i];0!==s[l]&&(r=!1)}r&&(o.splice(t--,1),e=n(n.s=a[0]))}return e}var r={},s={app:0},o=[];function n(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=r,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var d=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"2a96":function(e,t,a){"use strict";a("b76c")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cfa"),a("cca6"),a("a79d");var r=a("2b0e"),s=a("bc3a"),o=a.n(s),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("router-view")],1)},i=[],l={name:"App"},c=l,d=a("2877"),u=Object(d["a"])(c,n,i,!1,null,null,null),f=u.exports,v=a("f309");r["a"].use(v["a"]);var p=new v["a"]({}),m=a("8c4f"),h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-dialog",{attrs:{persistent:"","max-width":"600px","min-width":"360px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("h1",[e._v("Crypto trade")]),r("br"),r("div",[r("v-tabs",{attrs:{"show-arrows":"","background-color":"black","icons-and-text":"",dark:"",grow:""},on:{change:e.tabChanged},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[r("v-tabs-slider",{attrs:{color:"orange"}}),e._l(e.tabs,(function(t,a){return r("v-tab",{key:a},[r("v-icon",{attrs:{large:""}},[e._v(e._s(t.icon))]),r("div",{staticClass:"caption py-1"},[e._v(e._s(t.name))])],1)})),r("v-tab-item",[r("v-card",{staticClass:"px-4"},[r("v-card-text",[r("v-form",{ref:"loginForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"Username"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{"append-icon":e.show1?"eye":"eye-off",type:e.show1?"text":"password",name:"input-10-1",label:"Password"},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),r("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6",xsm:"12"}}),r("v-spacer"),r("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"3",xsm:"12","align-end":""}},[r("v-btn",{attrs:{"x-large":"",block:"",color:"warning"},on:{click:e.loginBtn}},[e._v(" Login ")])],1)],1)],1),e.error?r("div",{staticClass:"alert alert-danger col-md-4",attrs:{role:"alert"}},[e._v(" "+e._s(e.error)+" ")]):e._e()],1)],1)],1),r("v-tab-item",[r("v-card",{staticClass:"px-4"},[r("v-card-text",[r("v-form",{ref:"registerForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"Username"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"E-mail"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{"append-icon":e.show1?"mdi-eye":"mdi-eye-off",type:e.show1?"text":"password",name:"input-10-1",label:"Password"},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{block:"","append-icon":e.show1?"mdi-eye":"mdi-eye-off",type:e.show1?"text":"password",name:"input-10-1",label:"Confirm Password"},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})],1),r("v-spacer"),r("v-col",{staticClass:"d-flex ml-auto",attrs:{cols:"12",sm:"3",xsm:"12"}},[r("v-btn",{attrs:{"x-large":"",block:"",color:"warning"},on:{click:e.registerBtn}},[e._v("Register")])],1)],1)],1),e.error?r("div",{staticClass:"alert alert-danger col-md-4",attrs:{role:"alert"}},[e._v(" "+e._s(e.error)+" ")]):e._e()],1)],1)],1),r("v-tab-item",[r("v-card",{staticClass:"px-4"},[r("v-card-text",[r("v-form",{ref:"resetPasswordForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[e.showEmailFieldOfReset?r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"E-mail"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1):e._e(),e.showVerificationCodeAndPasswordFields?r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"Verification code"},model:{value:e.verificationCode,callback:function(t){e.verificationCode=t},expression:"verificationCode"}})],1):e._e(),e.showVerificationCodeAndPasswordFields?r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{"append-icon":e.show1?"mdi-eye":"mdi-eye-off",type:e.show1?"text":"password",name:"input-10-1",label:"New Password"},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1):e._e(),e.showVerificationCodeAndPasswordFields?r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{block:"","append-icon":e.show1?"mdi-eye":"mdi-eye-off",type:e.show1?"text":"password",name:"input-10-1",label:"Confirm New Password"},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})],1):e._e(),r("v-spacer"),r("v-col",{staticClass:"d-flex ml-auto",attrs:{cols:"12",sm:"6",xsm:"12"}},[r("v-btn",{attrs:{"x-large":"",block:"",color:"warning",disabled:e.resetPasswordBtnDisabled},on:{click:e.resetPasswordBtn}},[e._v(e._s(e.resetPasswordBtnLabel))])],1)],1)],1),e.error?r("div",{staticClass:"alert alert-danger col-md-4",attrs:{role:"alert"}},[e._v(" "+e._s(e.error)+" ")]):e._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:e.showSpinner,expression:"showSpinner"}],staticClass:"control-group"},[r("div",{staticClass:"controls"},[r("div",{staticClass:"spinner-border text-warning"})])])],1)],1)],1)],2)],1)]),r("video",{attrs:{id:"cryptoBG",autoplay:"",muted:"",loop:""},domProps:{muted:!0}},[r("source",{attrs:{src:a("845d"),type:"video/webm"}})])],1)},w=[],b=(a("d3b7"),{name:"Login",methods:{loginBtn:function(){var e=this,t=this.username,a=this.password;if(!t||!a)return this.error="Please fill all fields";this.$axios.post("api/login",{username:t,password:a}).then((function(a){var r=a.data,s=r.token,o=r.email;e.$store.commit("LOGIN",{user:{token:s,username:t,email:o}}),e.$router.push("/trade")})).catch((function(t){var a=t.response.data;return e.error=a}))},tabChanged:function(){this.resetFields()},resetFields:function(){this.error="",this.username="",this.email="",this.password="",this.confirmPassword="",this.showSpinner=!1,this.showVerificationCodeAndPasswordFields=!1,this.showEmailFieldOfReset=!0,this.resetPasswordBtnLabel="Send verification code",this.resetPasswordBtnDisabled=!1},registerBtn:function(){var e=this,t=this.username,a=this.email,r=this.password,s=this.confirmPassword;return t&&a&&r&&s?r!==s?this.error="Password and Confirm Password not match":void this.$axios.post("api/register",{username:t,email:a,password:r}).then((function(){e.resetFields(),e.tab=0})).catch((function(t){var a=t.response.data;return e.error=a})):this.error="Please fill all fields"},resetPasswordBtn:function(){switch(this.resetPasswordBtnLabel){case"Send verification code":this.sendVerificationCode();break;case"Reset":this.resetPassword();break}},sendVerificationCode:function(){var e=this,t=this.email;if(!t)return this.error="Please fill field";this.showSpinner=!0,this.resetPasswordBtnDisabled=!0,this.$axios.put("api/email_reset_code",{email:t}).then((function(){e.error="",e.showEmailFieldOfReset=!1,e.showVerificationCodeAndPasswordFields=!0,e.resetPasswordBtnLabel="Reset"})).catch((function(t){var a=t.response.data;return e.error=a})).finally((function(){e.showSpinner=!1,e.resetPasswordBtnDisabled=!1}))},resetPassword:function(){var e=this,t=this.verificationCode,a=this.password,r=this.confirmPassword;return t&&a&&r?a!==r?this.error="New Password and Confirm New Password not match":void this.$axios.put("api/reset_password",{email:this.email,email_reset_code:t,password:a}).then((function(){e.resetFields(),e.tab=0})).catch((function(t){var a=t.response.data;return e.error=a})):this.error="Please fill fields"}},data:function(){return{dialog:!0,tab:0,tabs:[{name:"Login",icon:"mdi-account"},{name:"Register",icon:"mdi-account-outline"},{name:"Reset password",icon:"mdi-account-outline"}],valid:!0,username:"",email:"",password:"",confirmPassword:"",show1:!1,resetPasswordBtnLabel:"",verificationCode:"",showEmailFieldOfReset:!0,showVerificationCodeAndPasswordFields:!1,error:"",showSpinner:!1,resetPasswordBtnDisabled:!1}}}),g=b,x=(a("ab45"),a("6544")),_=a.n(x),y=a("7496"),P=a("8336"),C=a("b0af"),k=a("99d9"),S=a("62ad"),V=a("169a"),O=a("4bd4"),$=a("132d"),B=a("0fd9"),L=a("2fa4"),T=a("71a3"),F=a("c671"),E=a("fe57"),j=a("9a96"),R=a("8654"),A=Object(d["a"])(g,h,w,!1,null,"71b9be7a",null),I=A.exports;_()(A,{VApp:y["a"],VBtn:P["a"],VCard:C["a"],VCardText:k["a"],VCol:S["a"],VDialog:V["a"],VForm:O["a"],VIcon:$["a"],VRow:B["a"],VSpacer:L["a"],VTab:T["a"],VTabItem:F["a"],VTabs:E["a"],VTabsSlider:j["a"],VTextField:R["a"]});var M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"ma-12 pa-12",attrs:{id:"navbar"}},[r("v-navigation-drawer",{staticStyle:{"background-color":"lightyellow"},attrs:{permanent:"","expand-on-hover":"",height:"100vh"}},[r("v-list",[r("v-list-item",{staticClass:"px-2"},[r("v-list-item-avatar",[r("v-img",{attrs:{src:a("ca70")}})],1)],1),r("v-list-item",[r("v-list-item-content",[r("v-list-item-title",{staticClass:"title"},[e._v(" "+e._s(this.$store.state.user.username)+" ")]),r("v-list-item-subtitle",[e._v(e._s(this.$store.state.user.email))])],1)],1)],1),r("v-divider"),r("v-list",{attrs:{nav:"",dense:""}},[r("v-list-item",{attrs:{link:"",to:"/trade"}},[r("v-list-item-title",[e._v("Trade")])],1),r("v-list-item",{attrs:{link:"",to:"/leaderboard"}},[r("v-list-item-title",[e._v("Leaderboard")])],1),r("v-list-item",{attrs:{link:""},on:{click:function(t){return e.logout()}}},[r("v-list-item-title",[e._v("Logout")])],1)],1)],1)],1),r("router-view")],1)},U=[],D={name:"Lobby",methods:{logout:function(){this.$store.commit("LOGOUT"),this.$router.push("/")}}},N=D,G=(a("2a96"),a("ce7e")),z=a("adda"),J=a("8860"),H=a("da13"),q=a("8270"),K=a("5d23"),Q=a("f774"),W=Object(d["a"])(N,M,U,!1,null,"4b941434",null),X=W.exports;_()(W,{VDivider:G["a"],VImg:z["a"],VList:J["a"],VListItem:H["a"],VListItemAvatar:q["a"],VListItemContent:K["a"],VListItemSubtitle:K["b"],VListItemTitle:K["c"],VNavigationDrawer:Q["a"]});var Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"4"}},[a("v-text-field",{attrs:{label:"Search...",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-col",{staticStyle:{"margin-left":"250px","margin-top":"30px"}},[e._v(" USD balance: "+e._s(e.usd)+" ")])],1)],1),a("v-simple-table",{staticStyle:{"background-color":"lightyellow"},scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",{staticStyle:{"border-bottom":"2pt solid grey"}},[a("th",[e._v("Coin")]),a("th",[e._v("Price")]),a("th",[e._v("24H Change")]),a("th",[e._v("Action")]),a("th",[e._v("Action")]),a("th",[e._v("Balance")])])]),a("tbody",e._l(e.filterCoins,(function(t,r){return a("tr",{key:r},[a("td",[a("img",{attrs:{src:t.image,height:"35px"}}),e._v(" "+e._s(t.name))]),a("td",[e._v("$"+e._s(t.current_price))]),a("td",{style:{color:t.price_change_percentage_24h<0?"red":"green"}},[e._v(" "+e._s(t.price_change_percentage_24h)+"% ")]),a("td",[a("button",{staticClass:"btn btn-warning rounded-pill",staticStyle:{float:"left","margin-right":"5px"},on:{click:function(a){return e.buy(r,t.name)}}},[e._v("Buy")]),a("range-slider",{ref:"rangeSliderBuy",refInFor:!0,staticStyle:{"margin-top":"9px"},attrs:{max:t.maxToBuy}})],1),a("td",[a("button",{staticClass:"btn btn-warning rounded-pill",staticStyle:{float:"left","margin-right":"5px"},on:{click:function(a){return e.sell(r,t.name)}}},[e._v("Sell")]),a("range-slider",{ref:"rangeSliderSell",refInFor:!0,staticStyle:{"margin-top":"9px"},attrs:{max:t.maxToSell}})],1),a("td",[e._v(" "+e._s(t.maxToSell)+" ")])])})),0)]},proxy:!0}])})],1)},Z=[],ee=(a("159b"),a("13d5"),a("b0c0"),a("d81d"),a("4de4"),a("841c"),a("ac1f"),a("caad"),a("2532"),a("2f62")),te=a("0e44");r["a"].use(ee["a"]);var ae=new ee["a"].Store({plugins:[Object(te["a"])()],state:{user:null},mutations:{LOGIN:function(e,t){var a=t.user;return e.user=a},LOGOUT:function(e){return e.user=null}}}),re=ae;function se(){return{headers:{Authorization:"Bearer: ".concat(re.state.user.token)}}}function oe(e){401===e.status&&(re.commit("LOGOUT"),Se.push("/"))}var ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"range",staticClass:"slider",attrs:{type:"range",step:"0.001"},domProps:{value:e.value},on:{__r:function(t){e.value=t.target.value}}}),a("span",[e._v(e._s(e.value))])])},ie=[],le={name:"RangeSlider",props:["max"],data:function(){return{value:0}},mounted:function(){this.setMax()},watch:{max:function(){this.setMax()}},methods:{setMax:function(){this.$refs.range.setAttribute("max",this.max)}}},ce=le,de=(a("e225"),Object(d["a"])(ce,ne,ie,!1,null,"24325a7e",null)),ue=de.exports,fe={name:"Trade",components:{RangeSlider:ue},data:function(){return{usd:0,coins:[],search:""}},created:function(){this.setMyProperty()},methods:{buy:function(e,t){var a=this;this.$axios.put("api/buy",{name:t,num:this.$refs.rangeSliderBuy[e].value},se()).then((function(){a.setMyProperty(),a.resetRangeSliders()})).catch((function(e){var t=e.response;oe(t),console.log("Error in buy: ",t.data)}))},sell:function(e,t){var a=this;this.$axios.put("api/sell",{name:t,num:this.$refs.rangeSliderSell[e].value},se()).then((function(){a.setMyProperty(),a.resetRangeSliders()})).catch((function(e){var t=e.response;oe(t),console.log("Error in sell: ",t.data)}))},resetRangeSliders:function(){var e=function(e){e.value=0};this.$refs.rangeSliderBuy.forEach(e),this.$refs.rangeSliderSell.forEach(e)},setMyProperty:function(){var e=this;this.$axios.all([this.$axios.get("api/my_property",se()),this.$axios.get("api/coins_data",se())]).then((function(t){e.usd=t[0].data.usd;var a=t[0].data.coins,r=t[1].data.coins,s=r.reduce((function(e,t){return e[t.name]=t,e}),{});e.coins=r.map((function(t){return t.maxToBuy=e.usd/s[t.name].current_price,t.maxToSell=a[t.name]||0,t}))})).catch((function(e){var t=e.response;oe(t),console.log("Error in setMyProperty: ",t.data)}))}},computed:{filterCoins:function(){var e=this;return this.coins.filter((function(t){return!e.search||t.name.toLowerCase().includes(e.search.toLowerCase())}))}}},ve=fe,pe=a("a523"),me=a("1f4f"),he=Object(d["a"])(ve,Y,Z,!1,null,null,null),we=he.exports;_()(he,{VCol:S["a"],VContainer:pe["a"],VRow:B["a"],VSimpleTable:me["a"],VTextField:R["a"]});var be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"4"}},[a("v-text-field",{attrs:{label:"Search...",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1),a("v-simple-table",{staticStyle:{"background-color":"lightyellow"},scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",{staticStyle:{"border-bottom":"2pt solid grey"}},[a("th",[e._v("#")]),a("th",[e._v("Username")]),a("th",[e._v("Total balance")])])]),a("tbody",e._l(e.filterUsers,(function(t,r){return a("tr",{key:r},[a("td",[e._v(e._s(r+1))]),a("td",[e._v(e._s(t.username))]),a("td",[e._v(e._s(t.totalBalance))])])})),0)]},proxy:!0}])})],1)},ge=[],xe={name:"Leaderboard",data:function(){return{users:[],search:""}},created:function(){this.setUsers()},methods:{setUsers:function(){var e=this;this.$axios.get("api/users_total_balance",se()).then((function(t){var a=t.data.users;e.users=a.sort((function(e,t){return t.totalBalance-e.totalBalance}))})).catch((function(e){var t=e.response;oe(t),console.log("Error in setUsers: ",t.data)}))}},computed:{filterUsers:function(){var e=this;return this.users.filter((function(t){return!e.search||t.username.toLowerCase().includes(e.search.toLowerCase())}))}}},_e=xe,ye=Object(d["a"])(_e,be,ge,!1,null,null,null),Pe=ye.exports;_()(ye,{VCol:S["a"],VContainer:pe["a"],VRow:B["a"],VSimpleTable:me["a"],VTextField:R["a"]}),r["a"].use(m["a"]);var Ce=[{path:"/",name:"login",component:I},{path:"/trade",component:X,children:[{path:"",component:we},{path:"/leaderboard",name:"leaderboard",component:Pe}],beforeEnter:function(e,t,a){if(!re.state.user)return a("/");a()}}],ke=new m["a"]({mode:"history",routes:Ce}),Se=ke;r["a"].config.productionTip=!1,r["a"].prototype.$axios=o.a,new r["a"]({vuetify:p,router:Se,store:re,render:function(e){return e(f)}}).$mount("#app")},"845d":function(e,t,a){e.exports=a.p+"media/crypto.c4c9caf6.webm"},"9da3":function(e,t,a){},ab45:function(e,t,a){"use strict";a("e6cf")},b76c:function(e,t,a){},ca70:function(e,t,a){e.exports=a.p+"img/user.ed2f6575.jpeg"},e225:function(e,t,a){"use strict";a("9da3")},e6cf:function(e,t,a){}});
//# sourceMappingURL=app.bf2f38b0.js.map